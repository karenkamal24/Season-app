# ๐ ุชูุซูู API - ููุฒุฉ ุงูุชุนุจุฆุฉ ุงูุฐููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุชูุซูู ูุดุฑุญ ููููุฉ ุงุณุชุฎุฏุงู API ููุชุนุจุฆุฉ ุงูุฐููุฉ ุจุงุณุชุฎุฏุงู Gemini AI.

---

## ๐ ุงููุตุงุฏูุฉ

ุฌููุน ุงูู endpoints ุชุญุชุงุฌ Bearer token:

```
Authorization: Bearer YOUR_API_TOKEN
```

---

## ๐ ุงููุบุฉ

ุงููุธุงู ูุฏุนู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.

### ุทุฑููุฉ ุชุญุฏูุฏ ุงููุบุฉ (ุจุงูุฃููููุฉ):
1. Query parameter: `?language=ar` ุฃู `?language=en`
2. Header: `Accept-Language: ar` ุฃู `Accept-Language: en`
3. ุงููุบุฉ ุงูุงูุชุฑุงุถูุฉ ููุชุทุจูู
4. ุงูุชุฑุงุถู: `ar` (ุนุฑุจู)

---

## ๐ก ุงูู Endpoints

### Base URL
```
/api/smart-bags
```

---

## 1๏ธโฃ ุงูุญุตูู ุนูู ูุฆุงุช ุงูุชุนุจุฆุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุทูุจ:**
```http
GET /api/smart-bags/ai/categories
Authorization: Bearer YOUR_TOKEN
Accept-Language: ar
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "message": "Categories retrieved successfully",
  "data": {
    "categories": [
      {
        "id": 1,
        "name": "ุงูููุงุจุณ",
        "name_ar": "ุงูููุงุจุณ",
        "name_en": "Clothing",
        "icon": "shirt",
        "icon_color": "#3498db",
        "sort_order": 1
      },
      {
        "id": 2,
        "name": "ูุณุชูุฒูุงุช ุงููุธุงูุฉ",
        "name_ar": "ูุณุชูุฒูุงุช ุงููุธุงูุฉ",
        "name_en": "Toiletries",
        "icon": "soap",
        "icon_color": "#9b59b6",
        "sort_order": 2
      }
    ],
    "language": "ar"
  }
}
```

**ููุงุญุธุฉ:** ุงููุฆุงุช ุชูุฌูุจ ูู ุฌุฏูู `item_categories` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูููุณ ูู AI.

---

## 2๏ธโฃ ุงูุญุตูู ุนูู ุงูุชุฑุงุญุงุช ุงูุนูุงุตุฑ ูู AI

**ุงูุทูุจ:**
```http
GET /api/smart-bags/ai/suggest-items?item_category_id=1
Authorization: Bearer YOUR_TOKEN
Accept-Language: ar
```

**ุงููุนุงููุงุช:**
- `item_category_id` (ูุทููุจ): ุฑูู ุงููุฆุฉ ูู ุฌุฏูู `item_categories`
- `language` (ุงุฎุชูุงุฑู): `ar` ุฃู `en`

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "success": true,
  "message": "AI items suggested successfully",
  "data": {
    "category": {
      "id": 1,
      "name": "ุงูููุงุจุณ",
      "name_ar": "ุงูููุงุจุณ",
      "name_en": "Clothing",
      "icon": "shirt",
      "icon_color": "#3498db"
    },
    "items": [
      {
        "name": "ูููุต",
        "weight": 0.15,
        "weight_grams": 150
      },
      {
        "name": "ุจูุทุงู",
        "weight": 0.5,
        "weight_grams": 500
      },
      {
        "name": "ููุงุจุณ ุฏุงุฎููุฉ",
        "weight": 0.05,
        "weight_grams": 50
      }
    ],
    "language": "ar"
  }
}
```

**ููุงุญุธุฉ:**
- `weight` ุจุงูููููุฌุฑุงู (kg)
- `weight_grams` ุจุงูุฌุฑุงู (ููุฑุฌูุน)

---

## 3๏ธโฃ ุฅุถุงูุฉ ุนูุตุฑ ูู AI ุฅูู ุงูุญููุจุฉ

**ุงูุทูุจ:**
```http
POST /api/smart-bags/{bagId}/ai/add-item
Authorization: Bearer YOUR_TOKEN
Content-Type: application/json
```

**Body:**
```json
{
  "item_name": "ูููุต",
  "weight": 0.15,
  "essential": true,
  "item_category_id": 1,
  "quantity": 1
}
```

**ุงููุนุงููุงุช:**
- `item_name` (ูุทููุจ): ุงุณู ุงูุนูุตุฑ
- `weight` (ูุทููุจ): ุงููุฒู ุจุงูููููุฌุฑุงู (0 - 999.99)
- `essential` (ุงุฎุชูุงุฑู): ูู ุงูุนูุตุฑ ุถุฑูุฑูุ ุงูุชุฑุงุถู: `false`
- `item_category_id` (ุงุฎุชูุงุฑู): ุฑูู ุงููุฆุฉ
- `quantity` (ุงุฎุชูุงุฑู): ุงููููุฉุ ุงูุชุฑุงุถู: `1`

**ุงูุงุณุชุฌุงุจุฉ (201):**
```json
{
  "success": true,
  "message": "AI item added successfully",
  "data": {
    "item": {
      "id": 123,
      "name": "ูููุต",
      "weight": 0.15,
      "total_weight": 0.15,
      "essential": true,
      "packed": false,
      "quantity": 1,
      "category": {
        "id": 1,
        "name": "ุงูููุงุจุณ",
        "icon": "shirt"
      }
    },
    "bag": {
      "current_weight": 5.25,
      "max_weight": 20.0,
      "weight_percentage": 26.25
    }
  }
}
```

---

## ๐ ูุซุงู ุนูู ุงูุชุฏูู ุงููุงูู

### ุงูุฎุทูุฉ 1: ุงูุญุตูู ุนูู ุงููุฆุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```javascript
const response = await fetch('/api/smart-bags/ai/categories', {
  headers: {
    'Authorization': `Bearer ${token}`,
    'Accept-Language': 'ar'
  }
});
const { data } = await response.json();
const categories = data.categories; // Array of { id, name, icon, ... }
// ุนุฑุถ ูู chips ุฃูููุฉ ูุน ุญูุธ id ููู ูุฆุฉ
```

### ุงูุฎุทูุฉ 2: ุงูุญุตูู ุนูู ุงูุนูุงุตุฑ ุนูุฏ ุงูุถุบุท ุนูู ูุฆุฉ
```javascript
const categoryId = 1; // ูู ุงููุฆุฉ ุงููุฎุชุงุฑุฉ
const response = await fetch(
  `/api/smart-bags/ai/suggest-items?item_category_id=${categoryId}`,
  {
    headers: {
      'Authorization': `Bearer ${token}`,
      'Accept-Language': 'ar'
    }
  }
);
const { data } = await response.json();
const items = data.items; // ุนุฑุถ ูู list ูุงุจู ููุงุฎุชูุงุฑ
const category = data.category; // ูุนูููุงุช ุงููุฆุฉ
```

### ุงูุฎุทูุฉ 3: ุนูุฏ ุงุฎุชูุงุฑ ุนูุตุฑ โ ุนุฑุถ Dialog
- ุงุณู ุงูุนูุตุฑ (ูู AI)
- ุงููุฒู (ูุงุจู ููุชุนุฏูู)
- Toggle "ุถุฑูุฑูุ"
- ุฒุฑ "ุฅุถุงูุฉ"

### ุงูุฎุทูุฉ 4: ุฅุถุงูุฉ ุงูุนูุตุฑ
```javascript
const response = await fetch(`/api/smart-bags/${bagId}/ai/add-item`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    item_name: "ูููุต",
    weight: 0.15, // ุงููุณุชุฎุฏู ููููู ุชุนุฏููู
    essential: true, // ุงููุณุชุฎุฏู ููุฑุฑ
    quantity: 1
  })
});
```

---

## โ๏ธ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃููุงุฏ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:

| ุงูููุฏ | ุงููุตู |
|-------|-------|
| `400` | ุทูุจ ุฎุงุทุฆ - ูุนุงููุงุช ุบูุฑ ุตุญูุญุฉ ุฃู ุงููุฒู ุชุฌุงูุฒ ุงูุญุฏ |
| `401` | ุบูุฑ ูุตุฑุญ - Token ููููุฏ ุฃู ุบูุฑ ุตุญูุญ |
| `404` | ุบูุฑ ููุฌูุฏ - ุงูุญููุจุฉ ุบูุฑ ููุฌูุฏุฉ |
| `422` | ุฎุทุฃ ูู ุงูุชุญูู - ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ |
| `500` | ุฎุทุฃ ูู ุงูุฎุงุฏู |

### ูุซุงู ุนูู ุฎุทุฃ:
```json
{
  "success": false,
  "message": "Cannot add more items. Weight limit exceeded."
}
```

---

## ๐จ ุชูุตูุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู

### 1. ุดุงุดุฉ ุงููุฆุงุช
- ุนุฑุถ ุงููุฆุงุช ูู **chips ุฃูููุฉ ูุงุจูุฉ ููุชูุฑูุฑ**
- ุนูุฏ ุงูุถุบุทุ ุงูุงูุชูุงู ูุดุงุดุฉ ุงูุนูุงุตุฑ

### 2. ุดุงุดุฉ ุงูุนูุงุตุฑ
- ุนุฑุถ ุงูุนูุงุตุฑ ูู **ูุงุฆูุฉ ูุงุจูุฉ ููุงุฎุชูุงุฑ**
- ูู ุนูุตุฑ ูุนุฑุถ: ุงูุงุณู ูุงููุฒู ุงูููุฏุฑ

### 3. Dialog ุฅุถุงูุฉ ุนูุตุฑ
- **ุงุณู ุงูุนูุตุฑ** (ูููุฑุงุกุฉ ููุท)
- **ุญูู ุงููุฒู** (ูุงุจู ููุชุนุฏูู)
- **Toggle "ุถุฑูุฑูุ"**
- **ุฒุฑ "ุฅุถุงูุฉ"**

### 4. ุจุนุฏ ุงูุฅุถุงูุฉ
- ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ
- ุชุญุฏูุซ ูุฒู ุงูุญููุจุฉ
- ุชุญุฏูุซ ูุงุฆูุฉ ุงูุนูุงุตุฑ
- ุฅุบูุงู ุงูู Dialog

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงููุฒู**: ุฌููุน ุงูุฃูุฒุงู ุจุงูููููุฌุฑุงู (kg)
2. **ุงููุบุฉ**: ุฃุฑุณู `Accept-Language` header ุฏุงุฆูุงู
3. **Essential**: ุงููุณุชุฎุฏู ููุฑุฑ ุนูุฏ ุงูุฅุถุงูุฉ
4. **ุงูุชุญูู ูู ุงููุฒู**: ุงููุธุงู ูุชุญูู ูู ุนุฏู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู
5. **Category ID**: ุงุฎุชูุงุฑู ููุนูุงุตุฑ ูู AI

---

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

1. **ุงููุตุงุฏูุฉ** ูุงูุญุตูู ุนูู Bearer token
2. **ุฅูุดุงุก ุญููุจุฉ** ุจุงุณุชุฎุฏุงู `POST /api/smart-bags`
3. **ุงูุญุตูู ุนูู ุงููุฆุงุช** ูู AI
4. **ุงูุญุตูู ุนูู ุงูุนูุงุตุฑ** ููุฆุฉ ูุนููุฉ
5. **ุฅุถุงูุฉ ุงูุนูุงุตุฑ** ููุญููุจุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 10 ููุงูุฑ 2026

