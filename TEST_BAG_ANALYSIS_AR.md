# ๐ค ุงุฎุชุจุงุฑ ุชุญููู ุงูุญููุจุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

## ๐ฏ Endpoint

```
POST /api/smart-bags/{bagId}/analyze
```

---

## โ ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

### 1. ูุฌุจ ุฃู ูููู ุนูุฏู:
- โ ุญููุจุฉ ููุฌูุฏุฉ (`bag_id`)
- โ ุฃุบุฑุงุถ ูู ุงูุญููุจุฉ (ุนูู ุงูุฃูู ุบุฑุถ ูุงุญุฏ)
- โ Token ุตุญูุญ

### 2. ุงูุญููุจุฉ **ูุง ุชููู ูุงุฑุบุฉ**:
```json
โ ุฅุฐุง ุงูุญููุจุฉ ูุงุฑุบุฉ:
{
  "success": false,
  "message": "Cannot analyze empty bag. Please add items first.",
  "message_ar": "ูุง ูููู ุชุญููู ุญููุจุฉ ูุงุฑุบุฉ. ุงูุฑุฌุงุก ุฅุถุงูุฉ ุฃุบุฑุงุถ ุฃููุงู."
}
```

---

## ๐ ููู ุชุฌุฑุจ ูู Postmanุ

### ุงูุฎุทูุฉ 1: ุชุฃูุฏ ูู ูุฌูุฏ ุญููุจุฉ ูุน ุฃุบุฑุงุถ

```http
GET /api/smart-bags
Authorization: Bearer YOUR_TOKEN
Accept-Language: ar
```

ุงุญูุธ ุงูู `bag_id` ูู ุงูู response.

### ุงูุฎุทูุฉ 2: ูู ุจุงูุชุญููู

```http
POST /api/smart-bags/1/analyze
Authorization: Bearer YOUR_TOKEN
Accept-Language: ar
Content-Type: application/json

{}
```

**ุฃู ูุน preferences (ุงุฎุชูุงุฑู):**

```json
{
  "preferences": [
    "ุฃุฏููุฉ",
    "ูุณุชูุฏุงุช ูููุฉ"
  ]
}
```

---

## ๐ Request Details

### Headers:
```
Authorization: Bearer YOUR_TOKEN
Accept-Language: ar (ููุนุฑุจูุฉ) ุฃู en (ููุฅูุฌููุฒูุฉ)
Content-Type: application/json
```

### Body (ุงุฎุชูุงุฑู):
```json
{
  "preferences": ["ุฃุฏููุฉ", "ูุณุชูุฏุงุช"],
  "force_reanalysis": false
}
```

### Parameters:

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `preferences` | array | No | ุชูุถููุงุช ุฅุถุงููุฉ ููุชุญููู |
| `force_reanalysis` | boolean | No | ุฅุนุงุฏุฉ ุงูุชุญููู ุญุชู ูู ุชู ูุคุฎุฑุงู |

---

## โ Response ูู ุญุงูุฉ ุงููุฌุงุญ

```json
{
  "success": true,
  "message": "ุชู ุชุญููู ุงูุญููุจุฉ ุจูุฌุงุญ",
  "data": {
    "id": 1,
    "bag_id": 1,
    "missing_items": [
      {
        "item": "ุดุงุญู ูุงุจุชูุจ",
        "category": "ุฅููุชุฑูููุงุช",
        "reason": "ุถุฑูุฑู ููุงุจุชูุจ",
        "priority": "high"
      },
      {
        "item": "ุฃุฏููุฉ ุดุฎุตูุฉ",
        "category": "ุฃุฏููุฉ ูุนูุงูุฉ",
        "reason": "ููู ููุฑุญูุงุช ุงูุทูููุฉ",
        "priority": "medium"
      }
    ],
    "unnecessary_items": [
      {
        "item": "ูุชุจ ุซูููุฉ",
        "reason": "ูููู ุงุณุชุฎุฏุงู ูุณุฎุฉ ุฅููุชุฑูููุฉ",
        "weight_saved": 2.5
      }
    ],
    "weight_optimization": {
      "current_weight": 15.3,
      "optimal_weight": 12.8,
      "can_reduce": 2.5,
      "suggestions": [
        "ุงุณุชุจุฏู ุงููุชุจ ุจูุณุฎ ุฅููุชุฑูููุฉ",
        "ุงุณุชุฎุฏู ููุชุฌุงุช ูุตุบุฑุฉ ููุนูุงูุฉ"
      ]
    },
    "smart_alerts": [
      {
        "type": "medicines_missing",
        "severity": "high",
        "message": "ูุง ุชูุฌุฏ ุฃุฏููุฉ ูู ุงูุญููุจุฉ",
        "action": "ุฃุถู ุงูุฃุฏููุฉ ุงูุฃุณุงุณูุฉ"
      },
      {
        "type": "documents_missing",
        "severity": "medium",
        "message": "ูุง ุชูุฌุฏ ูุณุชูุฏุงุช ุนูู",
        "action": "ุฑุงุฌุน ุงููุณุชูุฏุงุช ุงููุทููุจุฉ"
      }
    ],
    "additional_suggestions": [
      "ุงุญุฒู ููุงุจุณ ุฅุถุงููุฉ ูููู ูุงุญุฏ",
      "ูุง ุชูุณู ุดุงุญู ูุญููู",
      "ุชุฃูุฏ ูู ุฌูุงุฒ ุงูุณูุฑ"
    ],
    "confidence_score": 0.92,
    "processing_time_ms": 1250,
    "analyzed_at": "2026-01-01T22:30:45+00:00"
  }
}
```

---

## โ๏ธ ุญุงูุงุช ุงูุฎุทุฃ

### 1. ุงูุญููุจุฉ ูุงุฑุบุฉ:
```json
{
  "success": false,
  "message": "ูุง ูููู ุชุญููู ุญููุจุฉ ูุงุฑุบุฉ. ุงูุฑุฌุงุก ุฅุถุงูุฉ ุฃุบุฑุงุถ ุฃููุงู."
}
```
**ุงูุญู:** ุฃุถู ุฃุบุฑุงุถ ููุญููุจุฉ ุฃููุงู.

### 2. ุชู ุงูุชุญููู ูุคุฎุฑุงู (ุฃูู ูู 24 ุณุงุนุฉ):
```json
{
  "success": false,
  "message": "ุชู ุชุญููู ุงูุญููุจุฉ ูุคุฎุฑุงู. ุงุณุชุฎุฏู force_reanalysis=true ูุฅุนุงุฏุฉ ุงูุชุญููู.",
  "last_analyzed_at": "2026-01-01T21:00:00+00:00"
}
```
**ุงูุญู:** ุฃุถู `"force_reanalysis": true` ูู Body.

### 3. ุฎุทุฃ ุนุงู:
```json
{
  "success": false,
  "message": "ูุดู ูู ุชุญููู ุงูุญููุจุฉ",
  "error": "..."
}
```

---

## ๐ฌ ุณููุงุฑูู ูุงูู ูู Postman

### 1๏ธโฃ ุฃูุดุฆ ุญููุจุฉ
```
POST /api/smart-bags
Body:
{
  "name": "ุฑุญูุฉ ุฏุจู",
  "trip_type": "ุนูู",
  "duration": 4,
  "destination": "ุฏุจู",
  "departure_date": "2026-02-01",
  "max_weight": 20
}
```
ุงุญูุธ ุงูู `bag_id` (ูุซูุงู: 1)

### 2๏ธโฃ ุฃุถู ุฃุบุฑุงุถ
```
POST /api/smart-bags/1/items
Body:
{
  "name": "ูุงุจุชูุจ",
  "weight": 2.3,
  "item_category_id": 3
}
```

```
POST /api/smart-bags/1/items
Body:
{
  "name": "ููุงุจุณ ุฑุณููุฉ",
  "weight": 3.5,
  "item_category_id": 1,
  "quantity": 3
}
```

### 3๏ธโฃ ุงุญุตู ุนูู ุชูุงุตูู ุงูุญููุจุฉ
```
GET /api/smart-bags/1
```
ุชุฃูุฏ ูู ูุฌูุฏ ุงูุฃุบุฑุงุถ.

### 4๏ธโฃ ูู ุจุงูุชุญููู! ๐
```
POST /api/smart-bags/1/analyze
Body: {}
```

### 5๏ธโฃ ุดุงูุฏ ุงููุชูุฌุฉ! ๐

---

## ๐ ุฅุนุงุฏุฉ ุงูุชุญููู (Force Reanalysis)

ุฅุฐุง ุบููุฑุช ุงูุฃุบุฑุงุถ ูุนุงูุฒ ุชุญูู ุชุงูู ูุจู ูุฑูุฑ 24 ุณุงุนุฉ:

```json
{
  "force_reanalysis": true
}
```

---

## ๐ endpoints ุฅุถุงููุฉ

### ุงุญุตู ุนูู ุขุฎุฑ ุชุญููู:
```
GET /api/smart-bags/{bagId}/analysis/latest
```

### ุงุญุตู ุนูู ุชุงุฑูุฎ ุงูุชุญูููุงุช:
```
GET /api/smart-bags/{bagId}/analysis/history
```

### ุงุญุตู ุนูู ุงูุชูุจููุงุช ุงูุฐููุฉ:
```
GET /api/smart-bags/{bagId}/smart-alert
```

---

## ๐ก ูุตุงุฆุญ ูููุฉ

1. โ **ุฃุถู ุฃุบุฑุงุถ ูุงููุฉ** - ูููุง ุฒุงุฏุช ุงูุฃุบุฑุงุถุ ูุงู ุงูุชุญููู ุฃูุถู
2. โ **ุญุฏุฏ ููุน ุงูุฑุญูุฉ ุจุฏูุฉ** - ุงูุชุญููู ูุนุชูุฏ ุนููู
3. โ **ุฃุถู ุงูุชูุถููุงุช** - ูุซู "ุฃุฏููุฉ" ุฃู "ูุณุชูุฏุงุช"
4. โ๏ธ **ุงูุชุจู ูููุฒู** - ุงูุชุญููู ูุญุฐุฑู ุฅุฐุง ูุงุฑุจุช ุงูุญุฏ ุงูุฃูุตู

---

## ๐ฏ ูู Postman

ููุฌูุฏ ูู:
```
๐ค AI Features โ Analyze Bag - ุชุญููู ุฐูู ููุญููุจุฉ
```

ุฃู ูู:
```
๐ Complete Test Scenario โ 6๏ธโฃ Analyze with AI
```

---

## โจ ุฌุงูุฒ ููุชุฌุฑุจุฉ!

ุงูุขู ุฌุฑูุจ ุงูุชุญููู ูุดูู ุงูุงูุชุฑุงุญุงุช ุงูุฐููุฉ! ๐

**ููุงุญุธุฉ:** ุงูุชุญููู ูุณุชุบุฑู ุซูุงูู ููููุฉ ุญุณุจ ุนุฏุฏ ุงูุฃุบุฑุงุถ.


